<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FNAE: Five Nights at Epstein's</title>
    <style>
        body {
            background: black;
            color: lime;
            font-family: monospace;
            text-align: center;
            margin: 0;
            padding: 20px;
            overflow: hidden;
            transition: all 0.3s;
        }
        h1 { font-size: 2.2em; margin-bottom: 15px; text-shadow: 0 0 10px red; }
        #clock { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); font-size: 2em; color: lime; text-shadow: 0 0 10px lime; z-index: 100; }
        #power-bar { position: fixed; top: 60px; right: 10px; width: 200px; height: 20px; background: #111; border: 2px solid lime; z-index: 100; }
        #power-fill { height: 100%; background: lime; width: 100%; transition: width 0.5s; }
        #power-text { color: lime; font-size: 0.9em; margin-top: 5px; }
        .low-power #power-fill { background: red; }
        .low-power #power-text { color: red; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.3; } }
        #game-area { position: relative; width: 90%; max-width: 900px; height: 500px; margin: 0 auto; border: 5px solid lime; overflow: hidden; background: #000; box-shadow: 0 0 20px red; }
        #base-view, #monitor { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #base-view img, #camera-image { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%) sepia(0.1) brightness(0.7) contrast(1.3); transition: filter 0.3s; }
        #base-view { display: block; }
        #monitor { display: none; }
        #doors-btn, #toggle-btn {
            position: absolute; left: 50%; transform: translateX(-50%);
            background: #001100; color: lime; border: 3px solid lime; font-family: monospace;
            cursor: pointer; transition: all 0.3s; z-index: 20;
        }
        #doors-btn { bottom: 80px; padding: 15px 40px; font-size: 1.8em; }
        #toggle-btn { bottom: 20px; padding: 15px 30px; font-size: 1.5em; }
        #doors-btn:hover:not(.disabled), #toggle-btn:hover:not(.disabled) { background: #003300; box-shadow: 0 0 20px lime; }
        .disabled { opacity: 0.5; cursor: not-allowed; }
        #static-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('https://img.freepik.com/free-vector/white-black-grainy-noise-stipple-texture-background_1017-51837.jpg') repeat; opacity: 0.25; pointer-events: none; animation: static 0.05s infinite; z-index: 10; }
        @keyframes static { 0% { background-position: 0 0; } 100% { background-position: 100px 100px; } }
        #urgent-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,0,0,0.7); display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 30; color: white; font-size: 3em; text-shadow: 0 0 10px black; }
        #urgent-doors { background: #ff0000; color: white; border: 5px solid yellow; padding: 20px 50px; font-size: 2em; margin-top: 20px; cursor: pointer; }
        #timer-countdown { font-size: 4em; color: yellow; text-shadow: 0 0 20px red; }
        #camera-label, #base-label { position: absolute; top: 10px; left: 10px; font-size: 1.8em; background: rgba(0,0,0,0.8); padding: 5px 10px; border-radius: 5px; text-shadow: 0 0 5px lime; z-index: 15; }
        #buttons { margin-top: 140px; display: flex; flex-wrap: wrap; justify-content: center; }
        button { background: #001100; color: lime; border: 2px solid lime; padding: 12px 24px; margin: 8px; cursor: pointer; font-family: monospace; font-size: 1.1em; transition: all 0.3s; }
        button:hover { background: #003300; box-shadow: 0 0 15px lime; }
        #status { margin-top: 10px; font-size: 1.2em; }
        #game-over, #game-win { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); color: red; display: none; flex-direction: column; justify-content: center; align-items: center; z-index: 200; font-size: 3em; }
        #game-win { color: lime; }
        #restart-btn { margin-top: 30px; padding: 20px 50px; font-size: 1.5em; background: lime; color: black; border: none; border-radius: 10px; cursor: pointer; }
        #low-power-audio { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }
        .animatronic { position: absolute; bottom: 15%; height: 55%; transition: left 0.4s ease-out, transform 0.3s, filter 0.3s; z-index: 25; opacity: 0.9; pointer-events: none; }
    </style>
</head>
<body>
    <h1>FNAE: Five Nights at Epstein's - Night 1</h1>
    <div id="clock">12:00 AM</div>
    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="power-text">POWER: 100%</div>

    <div id="game-area">
        <div id="base-view">
            <img id="base-image" src="https://upload.wikimedia.org/wikipedia/commons/5/58/EFTA00002940-Temple_-_Blue-and-white_striped_building_with_a_red-and-white_labyrinth_in_front_set_against_a_tropical_backdrop_of_palm_trees_and_the_ocean_under_a_bright_sky.jpg" alt="Temple Exterior">
            <div id="base-label">BASE: Temple Overlook - Doors Open</div>
            <button id="doors-btn">CLOSE DOORS</button>
        </div>
        <div id="monitor">
            <img id="camera-image" src="" alt="CCTV Feed">
            <div id="static-overlay"></div>
            <div id="camera-label">CAM Loading...</div>
        </div>
        <button id="toggle-btn">OPEN CAMERAS</button>
        <div id="urgent-overlay">
            <div>SOMEONE IS RUNNING!</div>
            <div>CLOSE DOORS WITHIN 10 SECONDS!</div>
            <div id="timer-countdown">10</div>
            <button id="urgent-doors">CLOSE DOORS!</button>
        </div>
    </div>

    <div id="buttons"></div>
    <div id="status">Doors Open - Temple Secure</div>

    <div id="game-over">
        <div>GAME OVER</div>
        <div>THEY GOT YOU!</div>
        <button id="restart-btn">RESTART NIGHT</button>
    </div>

    <div id="game-win">
        <div id="win-title">NIGHT 1 COMPLETE!</div>
        <div>YOU SURVIVED!</div>
        <button id="restart-btn">NEXT NIGHT</button>
    </div>

    <audio id="low-power-audio" loop>
        <source src="https://www.myinstants.com/media/sounds/mao-zedong-propaganda-music-red-sun-in-the-sky.mp3" type="audio/mpeg">
    </audio>

    <script>
        const cameras = [
            { name: 'CAM01 - Pool Area', url: 'https://ichef.bbci.co.uk/images/ic/1024xn/p0mlfd2z.jpg' },
            { name: 'CAM02 - Courtyard', url: 'https://images.axios.com/oxDRBO-_3qoSiF03cVItwIt1I5U=/12x0:2714x1520/1920x1080/2025/12/03/1764780535196.png' },
            { name: 'CAM03 - Bedroom', url: 'https://d3i6fh83elv35t.cloudfront.net/static/2025/12/IMG_5201S-1024x682.jpg' },
            { name: 'CAM04 - Bathroom', url: 'https://d3i6fh83elv35t.cloudfront.net/static/2025/12/IMG_5254S-1024x682.jpg' },
            { name: 'CAM05 - Hallway/Office', url: 'https://hyperallergic.com/content/images/2025/12/epsteinphotos1.jpg' },
            { name: 'CAM06 - Dental Room', url: 'https://s.abcnews.com/images/US/epstein-house-2-rt-jef-251203_1764792198354_hpMain_2_16x9_1600.jpg' }
        ];

        const animatronics = [
            'https://i.imgur.com/1nYqZ3r.jpeg',
            'https://i.imgur.com/5dXjP0L.jpeg',
            'https://upload.wikimedia.org/wikipedia/commons/d/d3/Bill_Clinton.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/5/56/Donald_Trump_official_portrait.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/a/a0/Bill_Gates_2018.jpg',
            'https://upload.wikimedia.org/wikipedia/commons/0/08/Ghislaine_Maxwell_%28cropped%29.jpg'
        ];

        const clockEl = document.getElementById('clock');
        const powerFill = document.getElementById('power-fill');
        const powerText = document.getElementById('power-text');
        const baseView = document.getElementById('base-view');
        const monitor = document.getElementById('monitor');
        const toggleBtn = document.getElementById('toggle-btn');
        const doorsBtn = document.getElementById('doors-btn');
        const buttonsDiv = document.getElementById('buttons');
        const cameraImage = document.getElementById('camera-image');
        const cameraLabel = document.getElementById('camera-label');
        const baseLabel = document.getElementById('base-label');
        const status = document.getElementById('status');
        const gameOver = document.getElementById('game-over');
        const gameWin = document.getElementById('game-win');
        const winTitle = document.getElementById('win-title');
        const restartBtn = document.getElementById('restart-btn');
        const urgentOverlay = document.getElementById('urgent-overlay');
        const timerCountdown = document.getElementById('timer-countdown');
        const lowPowerAudio = document.getElementById('low-power-audio');

        let currentNight = 1;
        let isGameOver = false;
        let nightStartTime;
        let power = 100;
        let isCamerasOpen = false;
        let doorsClosed = false;
        let canOpenDoors = true;
        let currentCam = 0;
        let powerDrainInterval, clockInterval, animTimer, doorTimerId, noCamTimer;
        let lowPowerTriggered = false;
        let currentAnim = null;
        let countdownInterval = null;

        const NO_CAM_DEATH_DELAY = 20000;
        const SECONDS_PER_GAME_HOUR = 40;
        const CAMERA_DRAIN_RATE = 0.25;
        const ANIM_APPEAR_DELAY_MIN = 15000;
        const ANIM_APPEAR_DELAY_MAX = 50000;
        const ANIM_RUN_DELAY_MIN = 3000;
        const ANIM_RUN_DELAY_MAX = 7000;
        const RUN_AWAY_TIME = 10000;

        cameras.forEach((cam, idx) => {
            const btn = document.createElement('button');
            btn.textContent = cam.name;
            btn.onclick = () => switchCam(idx);
            buttonsDiv.appendChild(btn);
        });

        function initNight() {
            power = 100;
            isCamerasOpen = false;
            doorsClosed = false;
            canOpenDoors = true;
            currentCam = 0;
            isGameOver = false;
            lowPowerTriggered = false;
            nightStartTime = Date.now();
            lowPowerAudio.pause();
            lowPowerAudio.currentTime = 0;
            if (currentAnim) currentAnim.remove();
            currentAnim = null;

            updatePower();
            document.body.classList.remove('low-power');
            gameOver.style.display = 'none';
            gameWin.style.display = 'none';
            urgentOverlay.style.display = 'none';

            closeCameras();
            clearAllTimers();
            clockInterval = setInterval(updateClock, 1000);
            updateClock();

            document.querySelector('h1').textContent = `FNAE: Five Nights at Epstein's - Night ${currentNight}`;
            winTitle.textContent = `NIGHT ${currentNight} COMPLETE!`;
            restartBtn.textContent = currentNight >= 5 ? 'YOU WON THE GAME!' : 'NEXT NIGHT';

            doorsBtn.textContent = 'CLOSE DOORS';
            doorsBtn.classList.remove('disabled');
            toggleBtn.classList.remove('disabled');
            status.textContent = 'Doors Open - Temple Secure';
            baseLabel.textContent = 'BASE: Temple Overlook - Doors Open';

            scheduleAnimAppearance();
        }

        function clearAllTimers() {
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearTimeout(animTimer);
            clearTimeout(doorTimerId);
            clearTimeout(noCamTimer);
            if (countdownInterval) clearInterval(countdownInterval);
            powerDrainInterval = clockInterval = animTimer = doorTimerId = noCamTimer = countdownInterval = null;
        }

        function updatePower() {
            powerFill.style.width = Math.max(power, 0) + '%';
            powerText.textContent = `POWER: ${Math.floor(power)}%`;
            if (power <= 20) {
                document.body.classList.add('low-power');
                if (!lowPowerTriggered) {
                    lowPowerAudio.play().catch(() => {});
                    lowPowerTriggered = true;
                }
            } else {
                document.body.classList.remove('low-power');
            }
            if (power <= 0) gameOverFunc();
        }

        function drainPower() {
            let drain = (isCamerasOpen ? CAMERA_DRAIN_RATE : 0) + (doorsClosed ? 1.0 : 0);
            power = Math.max(0, power - drain);
            updatePower();
        }

        function updateClock() {
            const elapsed = (Date.now() - nightStartTime) / 1000;
            const hours = elapsed / SECONDS_PER_GAME_HOUR;
            if (hours >= 6) return winNight();

            const hour = Math.floor(hours) + 12;
            const min = Math.floor((hours % 1) * 60);
            clockEl.textContent = `${hour % 12 || 12}:${min.toString().padStart(2, '0')} AM`;
        }

        function switchCam(idx) {
            if (isGameOver || doorsClosed) return;
            currentCam = idx;
            cameraImage.src = cameras[idx].url;
            cameraLabel.textContent = cameras[idx].name;
        }

        function scheduleAnimAppearance() {
            const delay = ANIM_APPEAR_DELAY_MIN + Math.random() * (ANIM_APPEAR_DELAY_MAX - ANIM_APPEAR_DELAY_MIN);
            animTimer = setTimeout(spawnAnim, delay);
        }

        function spawnAnim() {
            if (isGameOver) return;

            if (currentAnim) currentAnim.remove();
            currentAnim = document.createElement('img');
            currentAnim.src = animatronics[Math.floor(Math.random() * animatronics.length)];
            currentAnim.className = 'animatronic';
            currentAnim.style.left = '10%';
            monitor.appendChild(currentAnim);

            const runDelay = ANIM_RUN_DELAY_MIN + Math.random() * (ANIM_RUN_DELAY_MAX - ANIM_RUN_DELAY_MIN);
            setTimeout(() => {
                if (currentAnim && !doorsClosed && !isGameOver) {
                    currentAnim.style.left = '120%';
                    triggerRunAwayWarning();
                }
            }, runDelay);

            scheduleAnimAppearance();
        }

        function triggerRunAwayWarning() {
            urgentOverlay.style.display = 'flex';
            let timeLeft = 10;
            timerCountdown.textContent = timeLeft;

            countdownInterval = setInterval(() => {
                timeLeft--;
                timerCountdown.textContent = timeLeft;
                if (timeLeft <= 0) {
                    clearInterval(countdownInterval);
                    if (urgentOverlay.style.display === 'flex') {
                        jumpscarePlayer();
                    }
                }
            }, 1000);
        }

        function jumpscarePlayer() {
            urgentOverlay.style.display = 'none';
            if (currentAnim) {
                currentAnim.style.transition = 'all 0.4s';
                currentAnim.style.left = '50%';
                currentAnim.style.bottom = '0';
                currentAnim.style.height = '100%';
                currentAnim.style.transform = 'scale(1.6)';
                currentAnim.style.filter = 'brightness(3) contrast(2.5) saturate(2)';
                currentAnim.style.zIndex = '300';
            }
            gameOverFunc();
        }

        function closeDoors() {
            if (!canOpenDoors) return;
            doorsClosed = true;
            canOpenDoors = false;
            doorsBtn.textContent = 'OPEN DOORS';
            doorsBtn.classList.add('disabled');
            baseLabel.textContent = 'BASE: Temple Overlook - Doors Closed';
            status.textContent = 'Doors Closed - Extra Power Drain';

            if (urgentOverlay.style.display === 'flex') {
                urgentOverlay.style.display = 'none';
                if (countdownInterval) clearInterval(countdownInterval);
                if (currentAnim) {
                    currentAnim.style.transition = 'left 1.2s ease-in-out';
                    currentAnim.style.left = '10%';
                }
                playBang();
                status.textContent = 'Doors Closed - They Returned';
            }

            doorTimerId = setTimeout(() => {
                canOpenDoors = true;
                doorsBtn.classList.remove('disabled');
            }, 10000);
        }

        function openDoors() {
            if (!canOpenDoors) return;
            doorsClosed = false;
            doorsBtn.textContent = 'CLOSE DOORS';
            baseLabel.textContent = 'BASE: Temple Overlook - Doors Open';
            status.textContent = isCamerasOpen ? 'Cameras Open - Monitor...' : 'Doors Open - Temple Secure';
        }

        function playBang() {
            const ctx = new (window.AudioContext || window.webkitAudioContext)();
            const osc = ctx.createOscillator();
            const gain = ctx.createGain();
            osc.connect(gain);
            gain.connect(ctx.destination);
            osc.frequency.value = 80;
            gain.gain.setValueAtTime(0.4, ctx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, ctx.currentTime + 0.4);
            osc.start();
            osc.stop(ctx.currentTime + 0.4);
        }

        function closeCameras() {
            isCamerasOpen = false;
            baseView.style.display = 'block';
            monitor.style.display = 'none';
            toggleBtn.textContent = 'OPEN CAMERAS';
            buttonsDiv.style.display = 'none';
            status.textContent = doorsClosed ? 'Doors Closed - Extra Power Drain' : 'Doors Open - Temple Secure';
            clearTimeout(noCamTimer);
            noCamTimer = setTimeout(() => {
                if (!isCamerasOpen && !isGameOver) gameOverFunc();
            }, NO_CAM_DEATH_DELAY);
            clearInterval(powerDrainInterval);
            powerDrainInterval = null;
        }

        function openCameras() {
            if (power <= 0 || isGameOver) return;
            isCamerasOpen = true;
            baseView.style.display = 'none';
            monitor.style.display = 'block';
            toggleBtn.textContent = 'CLOSE CAMERAS';
            buttonsDiv.style.display = 'flex';
            status.textContent = doorsClosed ? 'Doors Closed - Cams On' : 'Cameras Open - Monitor...';
            powerDrainInterval = setInterval(drainPower, 1000);
            clearTimeout(noCamTimer);
        }

        function gameOverFunc() {
            isGameOver = true;
            playBang();
            toggleBtn.classList.add('disabled');
            doorsBtn.classList.add('disabled');
            clearAllTimers();
            lowPowerAudio.pause();
            setTimeout(() => gameOver.style.display = 'flex', 1500);
        }

        function winNight() {
            isGameOver = true;
            clearAllTimers();
            lowPowerAudio.pause();
            gameWin.style.display = 'flex';
            if (currentNight >= 5) {
                winTitle.textContent = 'YOU SURVIVED ALL 5 NIGHTS!';
                restartBtn.textContent = 'PLAY AGAIN';
            }
        }

        toggleBtn.onclick = () => {
            if (isGameOver) return;
            isCamerasOpen ? closeCameras() : openCameras();
        };

        doorsBtn.onclick = () => {
            if (isGameOver) return;
            doorsClosed ? openDoors() : closeDoors();
        };

        urgentDoors.onclick = () => closeDoors();

        restartBtn.onclick = () => {
            currentNight = currentNight >= 5 ? 1 : currentNight + 1;
            initNight();
        };

        initNight();
    </script>
</body>
</html>
