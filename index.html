<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FNAE: Five Nights at Epstein's</title>
    <style>
        body { 
            background: black; 
            color: lime; 
            font-family: monospace; 
            text-align: center; 
            margin: 0; 
            padding: 20px; 
            overflow: hidden; 
            transition: all 0.4s; 
        }
        h1 { font-size: 2.2em; margin-bottom: 15px; text-shadow: 0 0 10px red; }
        #clock { position: fixed; top: 10px; left: 50%; transform: translateX(-50%); font-size: 2em; color: lime; text-shadow: 0 0 10px lime; z-index: 100; }
        #power-bar { position: fixed; top: 60px; right: 10px; width: 200px; height: 20px; background: #111; border: 2px solid lime; z-index: 100; }
        #power-fill { height: 100%; background: lime; width: 100%; transition: width 0.5s, background 0.3s; }
        #power-text { color: lime; font-size: 0.9em; margin-top: 5px; }
        .low-power #power-fill { background: red; }
        .low-power #power-text { color: red; animation: blink 1s infinite; }
        .surge #power-fill { animation: surge 1.5s; }
        @keyframes blink { 50% { opacity: 0.3; } }
        @keyframes surge { 0%,100% { background: lime; } 50% { background: yellow; box-shadow: 0 0 30px yellow; } }
        @keyframes glitch-shake { 0%,100% { transform: translate(0); } 20% { transform: translate(-5px,5px); } 40% { transform: translate(5px,-5px); } 60% { transform: translate(-4px,4px); } 80% { transform: translate(4px,-4px); } }
        @keyframes intense-shake { 0%,100% { transform: translate(0); } 10% { transform: translate(-8px,8px); } 20% { transform: translate(8px,-8px); } 30% { transform: translate(-6px,6px); } 70% { transform: translate(6px,-6px); } }
        #game-area { position: relative; width: 90%; max-width: 900px; height: 500px; margin: 0 auto; border: 5px solid lime; overflow: hidden; background: #000; box-shadow: 0 0 20px red; }
        #base-view, #monitor { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        #base-view img, #camera-image { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%) sepia(0.1) brightness(0.7) contrast(1.3); transition: filter 0.3s; }
        #monitor.glitch #camera-image { animation: glitch-shake 0.4s, glitch-flicker 0.6s; }
        #base-view { display: block; }
        #monitor { display: none; }
        #doors-btn, #toggle-btn { 
            position: absolute; left: 50%; transform: translateX(-50%); 
            background: #001100; color: lime; border: 3px solid lime; 
            font-family: monospace; cursor: pointer; transition: all 0.3s; z-index: 20; 
        }
        #doors-btn { bottom: 80px; padding: 15px 40px; font-size: 1.8em; }
        #toggle-btn { bottom: 20px; padding: 15px 30px; font-size: 1.5em; }
        #doors-btn:hover:not(.disabled), #toggle-btn:hover:not(.disabled) { background: #003300; box-shadow: 0 0 20px lime; }
        .disabled { opacity: 0.5; cursor: not-allowed; }
        #static-overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10"><rect width="10" height="10" fill="%23000"/><circle cx="5" cy="5" r="1" fill="%23fff" fill-opacity="0.08"/></svg>') repeat; opacity: 0.3; pointer-events: none; animation: static 0.08s infinite; z-index: 10; }
        @keyframes static { 0% { background-position: 0 0; } 100% { background-position: 20px 20px; } }
        #camera-label { position: absolute; top: 10px; left: 10px; font-size: 1.8em; background: rgba(0,0,0,0.8); padding: 5px 10px; border-radius: 5px; text-shadow: 0 0 5px lime; z-index: 15; }
        #buttons { margin-top: 140px; display: flex; flex-wrap: wrap; justify-content: center; }
        button { background: #001100; color: lime; border: 2px solid lime; padding: 12px 24px; margin: 8px; cursor: pointer; font-family: monospace; font-size: 1.1em; transition: all 0.3s; }
        button:hover { background: #003300; box-shadow: 0 0 15px lime; }
        #status { margin-top: 10px; font-size: 1.2em; }
        #game-over, #game-win { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.95); display: none; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 200; font-size: 4em; 
        }
        #game-over { color: #ff0044; text-shadow: 0 0 30px red; }
        #game-win { color: lime; }
        #restart-btn { margin-top: 40px; padding: 25px 60px; font-size: 1.8em; background: lime; color: black; border: none; border-radius: 10px; cursor: pointer; }
        
        /* Jumpscare enhancements */
        .jumpscare-active body { background: #8b0000 !important; animation: intense-shake 0.6s; }
        #epstein-jumpscare {
            position: fixed; inset: 0; z-index: 1000; 
            background: black; display: none; 
            justify-content: center; align-items: center; 
            opacity: 0; transition: opacity 0.15s;
        }
        #epstein-jumpscare img {
            max-width: 85vw; max-height: 85vh; 
            transform: scale(0.1); 
            filter: brightness(3) contrast(2.8) saturate(2.5) hue-rotate(10deg);
            box-shadow: 0 0 60px red;
        }
        .jumpscare-active #epstein-jumpscare {
            display: flex; opacity: 1;
        }
        .jumpscare-active #epstein-jumpscare img {
            animation: jumpscare-zoom 0.45s forwards;
        }
        @keyframes jumpscare-zoom {
            0% { transform: scale(0.1) rotate(-5deg); }
            40% { transform: scale(1.35) rotate(5deg); }
            100% { transform: scale(1.15); }
        }
    </style>
</head>
<body>

    <h1>FNAE: Five Nights at Epstein's - Night 1</h1>
    <div id="clock">12:00 AM</div>
    <div id="power-bar"><div id="power-fill"></div></div>
    <div id="power-text">POWER: 100%</div>

    <div id="game-area">
        <div id="base-view">
            <img src="https://upload.wikimedia.org/wikipedia/commons/5/58/EFTA00002940-Temple_-_Blue-and-white_striped_building_with_a_red-and-white_labyrinth_in_front_set_against_a_tropical_backdrop_of_palm_trees_and_the_ocean_under_a_bright_sky.jpg" alt="Temple" crossorigin="anonymous">
            <div id="base-label">BASE: Temple Overlook - Doors Open</div>
            <button id="doors-btn">CLOSE DOORS</button>
        </div>
        <div id="monitor">
            <img id="camera-image" src="" alt="CCTV" crossorigin="anonymous">
            <div id="static-overlay"></div>
            <div id="camera-label">CAM Loading...</div>
        </div>
        <button id="toggle-btn">OPEN CAMERAS</button>
    </div>

    <div id="buttons"></div>
    <div id="status">Doors Open - Temple Secure</div>

    <div id="game-over">
        <div>GAME OVER</div>
        <div>HE GOT YOU!</div>
        <button id="restart-btn">RESTART NIGHT</button>
    </div>

    <div id="game-win">
        <div id="win-title">NIGHT 1 COMPLETE!</div>
        <div>YOU SURVIVED!</div>
        <button id="restart-btn">NEXT NIGHT</button>
    </div>

    <!-- JUMPSCARE ELEMENT -->
    <div id="epstein-jumpscare">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/62/Jeffrey_Epstein_mug_shot.jpg" alt="EPSTEIN">
    </div>

    <!-- Red Son in the Sky / The East is Red - loud version -->
    <audio id="jumpscareSound" loop>
        <!-- Using a public domain patriotic march style sound (replace if you have better link) -->
        <!-- You can also use: https://files.catbox.moe/ or any direct mp3 link -->
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        <!-- Fallback: short loud scream or dramatic stinger if you prefer -->
        <!-- <source src="https://www.myinstants.com/media/sounds/epstein-didnt-kill-himself.mp3" type="audio/mpeg"> -->
    </audio>

    <script>
        const cameras = [ /* unchanged */ ];
        const enemies = [ /* unchanged */ ];

        let activeAnims = [];
        let currentNight = 1;
        let isGameOver = false;
        let nightStartTime;
        let power = 100;
        let isCamerasOpen = false;
        let doorsClosed = false;
        let canToggleDoors = true;
        let currentCam = 0;
        let powerDrainInterval, clockInterval, eventInterval;
        let lowPowerTriggered = false;
        let surgeActive = false;

        const SECONDS_PER_GAME_HOUR = 40;
        const CAMERA_DRAIN = 0.4;
        const DOORS_DRAIN = 1.5;
        const SPAWN_MIN = 12000;
        const SPAWN_MAX = 45000;
        const ACTIVATE_MIN = 10000;
        const ACTIVATE_MAX = 30000;
        const MOVE_SPEED = 4500;
        const GLITCH_CHANCE = 0.25;
        const SURGE_CHANCE = 0.08;

        // ... (rest of your variables and camera button creation unchanged)

        function jumpscare(target) {
            if (target && target.parentNode) {
                target.style.transition = 'all 0.35s';
                target.style.left = '48%';
                target.style.bottom = '-5%';
                target.style.height = '110%';
                target.style.transform = 'scale(2)';
                target.style.filter = 'brightness(3) contrast(3.5) saturate(3)';
                target.style.zIndex = '500';
            }

            isGameOver = true;
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            document.getElementById('toggle-btn').classList.add('disabled');
            document.getElementById('doors-btn').classList.add('disabled');

            // Red Son in the Sky at MAX VOLUME
            const sound = document.getElementById('jumpscareSound');
            sound.volume = 1.0;
            sound.currentTime = 0;
            sound.play().catch(e => console.log("Audio blocked - user interaction needed", e));

            // Epstein full screen jumpscare
            document.body.classList.add('jumpscare-active');
            document.getElementById('epstein-jumpscare').style.display = 'flex';

            setTimeout(() => {
                document.getElementById('game-over').style.display = 'flex';
            }, 1200);
        }

        // ... (rest of your code remains the same: initNight, updatePower, drainPower, etc.)

        // Make sure gameOverFunc also triggers the loud jumpscare style
        function gameOverFunc() {
            isGameOver = true;
            clearInterval(powerDrainInterval);
            clearInterval(clockInterval);
            clearInterval(eventInterval);
            document.getElementById('toggle-btn').classList.add('disabled');
            document.getElementById('doors-btn').classList.add('disabled');

            // Also trigger full jumpscare on power out
            const sound = document.getElementById('jumpscareSound');
            sound.volume = 1.0;
            sound.play().catch(() => {});
            document.body.classList.add('jumpscare-active');
            document.getElementById('epstein-jumpscare').style.display = 'flex';

            setTimeout(() => document.getElementById('game-over').style.display = 'flex', 800);
        }

        // Optional: stop sound & reset jumpscare when restarting
        document.getElementById('restart-btn').onclick = () => {
            document.getElementById('jumpscareSound').pause();
            document.getElementById('jumpscareSound').currentTime = 0;
            document.body.classList.remove('jumpscare-active');
            document.getElementById('epstein-jumpscare').style.display = 'none';
            currentNight = currentNight >= 5 ? 1 : currentNight + 1;
            initNight();
        };

        initNight();
    </script>
</body>
</html>
